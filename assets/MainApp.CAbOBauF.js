import{m as y,d as w,D as U,t as R,L as v,j as e,u as f}from"./Loading.Store.DWWzSuwn.js";import{R as p}from"./index.BJfUAbRs.js";const d=y({isUpload:!1,isMobile:window.innerWidth<768,file:null,fileType:"image",fileURL:"/stories/menor3.webp"});w({asideRight:{isVisible:!1,isAnim:!1},asideLeft:{isVisible:!1,isAnim:!1}});const b={Dialog:U,toast:R},x=typeof window<"u",k=x?window.location.pathname==="/"?"lifo/lib":window.location.pathname.split("/").filter(Boolean)[0]:"lifo/libs",N=v(`${k}-preferences`),g=v(`${k}-search`),u=w({musiclayer:{isMute:x?N.get("musiclayer/isMute"):!1,isOpen:!1}});u.subscribe(s=>{N.update("musiclayer",s.musiclayer)});const r=y({isUploading:!1,isSearching:!1,isSearchClicked:!1,searchText:"",historyResults:x?g.get("historyResults")||[]:[],searchResults:[]});r.subscribe(s=>{s.searchText,s.historyResults[0]?.title&&g.update("historyResults",s.historyResults)});const C=s=>{const t=s?.title,i=s?.description,l=s?.url;let o=g.get("historyResults")||[],a=!1;for(let c=0;c<o.length;c++)if(o[c].title===t){a=!0;break}const n=[...o,{title:t,description:i,url:l,...s}];a||r.setKey("historyResults",n.slice(0,5))},M={selectSong:C},T={adjustment:e.jsx("path",{fill:"currentColor",d:"M10.83 5a3.001 3.001 0 0 0-5.66 0H4a1 1 0 1 0 0 2h1.17a3.001 3.001 0 0 0 5.66 0H20a1 1 0 1 0 0-2h-9.17ZM4 11h9.17a3.001 3.001 0 0 1 5.66 0H20a1 1 0 1 1 0 2h-1.17a3.001 3.001 0 0 1-5.66 0H4a1 1 0 1 1 0-2Zm1.17 6H4a1 1 0 1 0 0 2h1.17a3.001 3.001 0 0 0 5.66 0H20a1 1 0 1 0 0-2h-9.17a3.001 3.001 0 0 0-5.66 0Z"}),volumeUp:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.5 8.43A4.985 4.985 0 0 1 17 12a4.984 4.984 0 0 1-1.43 3.5m2.794 2.864A8.972 8.972 0 0 0 21 12a8.972 8.972 0 0 0-2.636-6.364M12 6.135v11.73a1 1 0 0 1-1.64.768L6 15H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h2l4.36-3.633a1 1 0 0 1 1.64.768Z"}),volumeMute:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.5 8.43A4.985 4.985 0 0 1 17 12c0 1.126-.5 2.5-1.5 3.5m2.864-9.864A8.972 8.972 0 0 1 21 12c0 2.023-.5 4.5-2.5 6M7.8 7.5l2.56-2.133a1 1 0 0 1 1.64.768V12m0 4.5v1.365a1 1 0 0 1-1.64.768L6 15H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m1-4 14 14"}),music:e.jsx("path",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.6216 3.21667c.2391.1897.3784.47817.3784.78334V15.6667c0 .0412-.0025.0818-.0073.1218.0048.0698.0073.1404.0073.2115 0 1.6569-1.3431 3-3 3s-3-1.3431-3-3 1.3431-3 3-3c.3506 0 .6872.0602 1 .1707V9.2602l-8 1.8667V18l-.00001.0032C8.99824 19.6586 7.65577 21 6 21c-1.65685 0-3-1.3431-3-3s1.34315-3 3-3c.35064 0 .68722.0602 1 .1707V6.33334c0-.46474.32018-.86823.77277-.97384l9.99953-2.33321c.1486-.03477.3012-.03465.4467-.00201.1427.03202.2783.09532.3964.18752.0021.00162.0041.00324.0062.00487Z"}),close:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),search:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",d:"m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"})};function m({icon:s="adjustment",size:t=24,...i}){return e.jsx("svg",{className:i.className||"",height:t,width:t,viewBox:"0 0 24 24",fill:"none",style:i.style,children:T[s]})}function S(){const{searchResults:s,historyResults:t}=f(r),i=p.useRef(null);return p.useEffect(()=>{const l=o=>{const a=document.querySelector("[data-input-search]"),n=o.target,c=a?.contains(n),h=i.current?.contains(n);c||h||r.setKey("isSearchClicked",!1)};return window.addEventListener("pointerdown",l),()=>{window.removeEventListener("pointerdown",l)}},[]),s.length<=0&&t.length<=0?null:e.jsx("section",{className:"absolute top-full left-1/2 bg-lifo-bg-secondary -translate-x-1/2 w-full mt-3 rounded-md min-h-[210px] p-2",ref:i,children:s.length>0?s.map((l,o)=>e.jsx(j,{data:l},o)):t.length>0?t.map((l,o)=>e.jsx(j,{data:l},o)):null})}const j=({item:s})=>{const t=s?.title||"My Love i Think",i=s?.description||"There Will Be Blood",l=s?.url||"/stories/menor3.webp";return e.jsxs("div",{className:"search-list-card f-row gap-4 f-align-center w-full p-2 hover:bg-lifo-bg-third rounded-md pointer",onClick:async()=>{await M.selectSong({title:t,description:i,url:l});let o=d.get();d.set({...o,isUpload:!0,fileURL:"alst",fileType:"spotify",file:null})},children:[e.jsx("img",{src:l,alt:"song cover image",className:"size-12 rounded-sm object-cover d-flex f-center no-select ml-1"}),e.jsxs("div",{className:"f-col mr-2 no-select",children:[e.jsx("span",{className:"fs-custom-14-5 fw-500",children:t}),e.jsx("span",{className:"fs-custom-14-5 fw-200",children:i})]})]})};function z(){const{isUploading:s,isSearchClicked:t}=f(r),i=p.useRef(null);p.useEffect(()=>{const a=n=>{const c=d.get();d.set({...c,isUpload:!0,file:null,fileURL:n.clipboardData?.getData("text"),fileType:"image"})};return window.addEventListener("paste",a),()=>{window.removeEventListener("paste",a)}},[]);async function l(a){r.setKey("isUploading",!0);const n=a.type.startsWith("image/"),c=a.type.startsWith("video/");if(!n&&!c){b.toast.error("Solo se permiten imÃ¡genes o videos"),r.setKey("isUploading",!1);return}const h=URL.createObjectURL(a);await new Promise(L=>setTimeout(L,180)),d.set({...d.get(),isUpload:!0,file:a,fileURL:h,fileType:n?"image":"video"})}const o=a=>{const n=a.target.value;i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{r.setKey("searchText",n)},500)};return e.jsxs("section",{className:"f-col gap-4 f-center mb-10 px-3",children:[e.jsxs("div",{className:"bg-lifo-bg-secondary w-full h-12 px-2 f-row rounded-lg f-center relative",children:[e.jsx("input",{type:"text",className:"outline-none h-full ml-2 f-grow fs-custom-15",placeholder:"What do you want to play?",onClick:()=>r.setKey("isSearchClicked",!0),"data-input-search":"true",onChange:o}),e.jsx("span",{className:"size-11 pointer d-flex f-center",children:e.jsx(m,{icon:"search",size:26})}),t&&e.jsx(S,{})]}),e.jsxs("div",{className:"border-dashed border bg-lifo-bg-secondary border-lifo-border rounded-xl p-4 f-col f-center gap-4 max-w-3xl",children:[e.jsxs("label",{className:"p-3 pointer btn-secondary br-6 mt-3 cursor-pointer text",children:[s?"Uploading...":"Upload",e.jsx("input",{type:"file",accept:"image/*,video/*",className:"opacity-0 absolute w-0 h-0",onChange:async a=>{const n=a.target.files?.[0];n&&l(n)}})]}),e.jsx("span",{className:"fs-2",children:"Upload an image or Paste URL"}),e.jsx("span",{className:"fs-1 fw-400 mt-1 text-center",children:"By uploading an image or URL you agree to our Terms of Use and Privacy Policy. "})]})]})}function W(s){return e.jsxs("div",{className:"spotify-card f-center absolute pointer","data-type":s.type,onClick:()=>{u.setKey("musiclayer.isOpen",!0)},children:[e.jsx("span",{className:"f-col f-center size-12 rounded-md no-select",children:e.jsx("img",{src:"#",alt:"",className:"h-full w-full rounded-xs object-cover d-flex f-center"})}),e.jsxs("div",{className:"f-col mr-2 no-select",children:[e.jsx("span",{className:"fs-custom-14-5 text-black",style:{fontWeight:530},children:"Open Spaces"}),e.jsx("span",{className:"fs-custom-14-5 fw-300 text-black",children:"There Will Be Blood"})]})]})}function P(){const{musiclayer:s}=f(u);return e.jsxs("div",{className:`h-full w-full d-flex absolute z-50 p-3 ${s.isOpen?"":"no-select"}`,onClick:t=>{t.stopPropagation(),u.setKey("musiclayer.isOpen",!1)},children:[e.jsxs("div",{className:"w-full h-max f-row justify-between",children:[e.jsxs("div",{className:"f-row gap-3 h-max pointer-events-auto",children:[e.jsx(m,{icon:"music",size:26}),e.jsx("span",{className:"pointer",onClick:()=>u.setKey("musiclayer.isMute",!s.isMute),children:e.jsx(m,{icon:s.isMute?"volumeMute":"volumeUp",size:26})})]}),e.jsx(m,{icon:"adjustment",size:26})]}),e.jsx(W,{type:"simple"})]})}const V=async s=>{await new Promise(t=>setTimeout(t,s))},K={awaitTime:V};function B(){const{isUpload:s,fileURL:t,fileType:i}=f(d),{musiclayer:l}=f(u);return s?e.jsxs("main",{className:"h-[calc(100vh_-_18px)] w-full f-row relative f-center gap-4 px-3",children:[e.jsxs("section",{className:"aspect-[9/16] h-full max-h-screen rounded-lg relative d-flex f-center o-hidden p-3",children:[i==="image"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full h-full f-col f-center absolute z-0 no-select",style:{backgroundImage:`url(${t})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(60px)",transform:"scale(1.2)"}}),e.jsx("img",{src:t,alt:"Preview",className:"w-full object-cover z-1 rounded-md"})]}):i==="video"?e.jsx("video",{src:t,className:"w-full object-cover z-1",controls:!0,autoPlay:!0}):null,e.jsx(P,{})]}),e.jsxs("section",{className:"bg-lifo-bg-secondary rounded-lg f-col h-full p-3 min-w-lg",children:[e.jsx("div",{children:e.jsx("span",{className:"rounded-full pointer pointer-events-auto h-max",onClick:()=>{b.Dialog.show({title:"Are you sure to leave?",message:"This acction is not reversible.",onClick:async()=>{await K.awaitTime(100),r.set({...r.get(),isSearchClicked:!1,isUploading:!1}),d.setKey("isUpload",!1)}})},children:e.jsx(m,{icon:"close",size:32})})}),"panelright"]})]}):null}function I(){return e.jsx("div",{children:"mobileView"})}function H(){const{isUpload:s,isMobile:t}=f(d);return s?t?e.jsx(I,{}):e.jsx(B,{}):e.jsx(z,{})}export{H as default};
